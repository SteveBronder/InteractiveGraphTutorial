<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Pretty Graphs in R</title>
  <meta name="description" content="">
  <meta name="author" content="Steve Bronder">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="stylesheet" href="libraries/frameworks/revealjs/css/reveal.min.css">
  <link rel="stylesheet" href="libraries/frameworks/revealjs/css/theme/Simple.css" id="theme">
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/github.css" id="theme">
  <!--[if lt IE 9]>
  <script src="lib/js/html5shiv.js"></script>
  <![endif]-->  
</head>
<body>
  <div class="reveal">
    <div class="slides">
      <section class='' data-state='' id='slide-1'>
  <h3>Pretty Graphs in R</h3>
  <p>A Realistic Approach
 - Steve Bronder</p>

</section>
<section class='' data-state='' id='slide-2'>
  <h3>Outline</h3>
  <ul class='incremental'>
  <li class='fragment'>What is R?</li>
  <li class='fragment'>Why and why not R?</li>
  <li class='fragment'>Describing the Language</li>
  <li class='fragment'>Data manipulation examples</li>
  <li class='fragment'>Pretty graph examples</li>
  <li class='fragment'>NLP in R</li>
  <li class='fragment'>Learning Resources</li>
</ul>

</section>
<section class='' data-state='' id='slide-3'>
  <h3>What is R?</h3>
  <ul class='incremental'>
  <li class='fragment'>Statistical language for data analysis</li>
    <li class='fragment'>Simple and effective language </li>
  <li class='fragment'>Can talk to Python, Julia, C, C++, HTML, CSS, etc.</li>
  <li class='fragment'>Extended by user contributions</li>
</ul>

</section>
<section>
   <section class='class' data-state=''>
    <h3>Why useR?</h3>
    <ul class='incremental'>
  <li class='fragment'>Created by Statisticians</li>
  <li class='fragment'>Strong Community</li>
  <li class='fragment'>Being lazy. work smart and efficient</li>
  <li class='fragment'>Easy to prototype and make actionable</li>
  <li class='fragment'>Nothing beats R in Graphics</li>
</ul>

<script>
$('ul.incremental li').addClass('fragment')
$('ol.incremental li').addClass('fragment')
</script>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>Why notR?</h3>

<ul class='incremental'>
  <li class='fragment'>Created by Statisticians</li>
  <li class='fragment'>Sharp learning curve</li>
  <li class='fragment'>No more point and clicking</li>
  <li class='fragment'>Funky syntax</li>
   <li class='fragment'>Poorly written R code is terribly slow</li>
</ul>

<script>
$('ul.incremental li').addClass('fragment')
$('ol.incremental li').addClass('fragment')
</script>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>Fast and Slow R Code</h3>

<pre><code class="r">library(microbenchmark)
</code></pre>

<pre><code>## Error in library(microbenchmark): there is no package called &#39;microbenchmark&#39;
</code></pre>

<pre><code class="r">x &lt;- runif(100)
microbenchmark(
  sqrt(x),
  x ^ 0.5
)
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): could not find function &quot;microbenchmark&quot;
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section>
   <section class='class' data-state=''>
    <h3>Describing the Language</h3>
    <h5>Everything is a function</h5>

<pre><code class="r">1 + 1
</code></pre>

<pre><code>## [1] 2
</code></pre>

<pre><code class="r">`+`(1,1)
</code></pre>

<pre><code>## [1] 2
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>Describing the Language</h3>

<h5>Make Statistics Easy</h5>

<pre><code class="r">data(iris)
fit.1 &lt;- lm(Sepal.Length ~ Petal.Length + Species, data = iris)
</code></pre>

<pre><code>## Error in loadNamespace(name): there is no package called &#39;stargazer&#39;
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section>
   <section class='class' data-state=''>
    <h3>Describing the Language</h3>
    <h5>informal and formal OO systems available</h5>

<pre><code class="r">library(pryr)
</code></pre>

<pre><code>## Error in library(pryr): there is no package called &#39;pryr&#39;
</code></pre>

<pre><code class="r"># make a generic class and throw random things into it
foo &lt;- structure(list(), class = &quot;foo&quot;)
foo$balance &lt;- 100
foo$withdraw &lt;- function(x){
  foo$balance &lt;&lt;- foo$balance - x
}
foo$deposit &lt;- function(x){
  foo$balance &lt;&lt;- foo$balance + x
}

foo$withdraw(10)
foo$deposit(1000)
foo$balance
</code></pre>

<pre><code>## [1] 1090
</code></pre>

<pre><code class="r">otype(foo)
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): could not find function &quot;otype&quot;
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>Describing the language</h3>

<h5>informal and formal OO systems available</h5>

<pre><code class="r">library(methods)
# make a formal RC class
Accounts &lt;- setRefClass(&quot;Accounts&quot;,
  fields = list(balance = &quot;numeric&quot;),
  methods = list(
    withdraw = function(x) {
      balance &lt;&lt;- balance - x
    },
    deposit = function(x) {
      balance &lt;&lt;- balance + x
    }
  )
)

a &lt;- Accounts$new(balance = 100)
a$deposit(100)
a$balance
</code></pre>

<pre><code>## [1] 200
</code></pre>

<pre><code class="r">a$lottery &lt;- &quot;Insert winning lottery numbers here&quot;
</code></pre>

<pre><code>## Error in envRefSetField(x, what, refObjectClass(x), selfEnv, value): &#39;lottery&#39; is not a field in class &quot;Accounts&quot;
</code></pre>

<pre><code class="r">otype(a)
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): could not find function &quot;otype&quot;
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section>
   <section class='class' data-state=''>
    <h3>Data manipulation in R</h3>
    <h5>data.table Objective</h5>

<ol class='incremental'>
  <li class='fragment'>Develop light, SQL style data manipulation language in R.</li>
    <li class='fragment'>Fast, readable, consistent </li>
</ol>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>Data manipulation in R</h3>

<ul>
<li>Create bins by flower type for sepal length</li>
</ul>

<pre><code class="r">library(reshape2)
data(iris)
head(iris)
</code></pre>

<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa
</code></pre>

<pre><code class="r">iris$cut.sepal &lt;- melt(vapply(split(iris$Sepal.Length,iris$Species),
                   function(x) cut(x,5),vector(mode = &quot;integer&quot;, length=50)))$value
head(iris,n=5)
</code></pre>

<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species cut.sepal
## 1          5.1         3.5          1.4         0.2  setosa         3
## 2          4.9         3.0          1.4         0.2  setosa         3
## 3          4.7         3.2          1.3         0.2  setosa         2
## 4          4.6         3.1          1.5         0.2  setosa         1
## 5          5.0         3.6          1.4         0.2  setosa         3
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>Data manipulation in R</h3>

<h5>data.table Answer</h5>

<p><code>data[i , j, by]</code></p>

<table><thead>
<tr>
<th>Syntax</th>
<th align="center">SQL</th>
<th align="center">Meaning</th>
<th align="right">Example</th>
</tr>
</thead><tbody>
<tr>
<td>i</td>
<td align="center">WHERE</td>
<td align="center">subset rows by i</td>
<td align="right">price &gt; 0</td>
</tr>
<tr>
<td>j</td>
<td align="center">SELECT</td>
<td align="center">using column j</td>
<td align="right">logPrice := log(price)</td>
</tr>
<tr>
<td>by</td>
<td align="center">GROUP-BY</td>
<td align="center">grouped by</td>
<td align="right">by = store</td>
</tr>
</tbody></table>

<pre><code class="r">iris &lt;- data.table(iris)
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): could not find function &quot;data.table&quot;
</code></pre>

<pre><code class="r">iris[Petal.Width &gt;=.2 , cut.sepal := as.integer(cut(Sepal.Length, 5)), by = Species]
</code></pre>

<pre><code>## Error in `[.data.frame`(iris, Petal.Width &gt;= 0.2, `:=`(cut.sepal, as.integer(cut(Sepal.Length, : unused argument (by = Species)
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section>
   <section class='class' data-state=''>
    <h3>Example: Cleaning Data</h3>
    <p>General Payment Dataset:</p>

<ul class = "build incremental">
<li>All general payments made to physicians and hospitals </li>
<li>Recipients name, address, and specialty, payment, and &quot;nature of payment&quot;, etc.</li>
<li>2.6 million by 63 variables</li>
</ul>

<pre><code class="r">library(data.table, quietly =  TRUE,warn.conflicts = FALSE)
</code></pre>

<pre><code>## data.table 1.9.6  For help type ?data.table or https://github.com/Rdatatable/data.table/wiki
## The fastest way to learn (by data.table authors): https://www.datacamp.com/courses/data-analysis-the-data-table-way
</code></pre>

<pre><code class="r">dat &lt;- fread(&quot;/home/steve/Documents/OP_DTL_GNRL_PGYR2013_P06302015.csv&quot;)
</code></pre>

<pre><code>## 
Read 0.0% of 4055634 rows
Read 1.7% of 4055634 rows
Read 3.7% of 4055634 rows
Read 7.6% of 4055634 rows
Read 12.1% of 4055634 rows
Read 17.3% of 4055634 rows
Read 23.9% of 4055634 rows
Read 30.8% of 4055634 rows
Read 32.5% of 4055634 rows
Read 38.5% of 4055634 rows
Read 42.9% of 4055634 rows
Read 50.8% of 4055634 rows
Read 56.2% of 4055634 rows
Read 63.6% of 4055634 rows
Read 70.8% of 4055634 rows
Read 71.0% of 4055634 rows
Read 77.9% of 4055634 rows
Read 82.6% of 4055634 rows
Read 90.5% of 4055634 rows
Read 90.7% of 4055634 rows
Read 98.1% of 4055634 rows
Read 4055634 rows and 63 (of 63) columns from 1.984 GB file in 00:00:33
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>Example: Aggregation</h3>

<pre><code class="r">#Remove $ sign from Dollars column
  dat[ , Total_Amount_of_Payment_USDollars := as.numeric(substring(Total_Amount_of_Payment_USDollars,2))]

# Set the key variable for taking unique values
setkey(dat, Recipient_State)

#Get the averages for each state
  dat.means &lt;- unique(dat[, mean(Total_Amount_of_Payment_USDollars,
                                           na.rm = TRUE),by = Recipient_State])
</code></pre>

<!---
This actually runs
-->

<pre><code class="r">#Remove $ sign from Dollars column
invisible(
  dat[ , Total_Amount_of_Payment_USDollars := as.numeric(substring(Total_Amount_of_Payment_USDollars,2))]
  )

# Set the key variable for taking unique values
setkey(dat, Recipient_State)

#Get the averages for each state
system.time(
  dat.means &lt;- unique(dat[, mean(Total_Amount_of_Payment_USDollars,
                                           na.rm = TRUE),by = Recipient_State])
  )
</code></pre>

<pre><code>##    user  system elapsed 
##   0.032   0.000   0.033
</code></pre>

<pre><code class="r">rm(dat)
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>Example: Displaying Data</h3>

<iframe src="dat.means.html"style="border: none; width: 1200px; height: 1000px"></iframe>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>Example: Cleaning Data</h3>

<pre><code class="r">dim(dat.means)
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): object &#39;dat.means&#39; not found
</code></pre>

<pre><code class="r"># Set keys
setkey(dat.means, state)
</code></pre>

<pre><code>## Error in setkey(dat.means, state): object &#39;dat.means&#39; not found
</code></pre>

<pre><code class="r">dat.means &lt;- dat.means[!c(&quot;AA&quot;,&quot;AE&quot;,&quot;PR&quot;,&quot;VI&quot;,&quot;ON&quot;,&quot;AP&quot;,&quot;GU&quot;)]
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): object &#39;dat.means&#39; not found
</code></pre>

<pre><code class="r">dat.means &lt;- dat.means[nzchar(state)]
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): object &#39;dat.means&#39; not found
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>Example: Making Interactive</h3>

<pre><code class="r">library(rMaps)
library(htmlwidgets)
library(rcstatebin)
map &lt;- statebin(as.data.frame(dat.means), payments ~ state,
                heading = &quot;&lt;b&gt;Average Payment from Pharmaceutical Companies to Doctors By State&lt;/b&gt;&quot;,
                footer = &quot;&lt;small&gt;Data comes from openpaymentsdata.cms.gov&lt;/small&gt;&quot;,
                type = &quot;hex&quot;)

saveWidget(map,&quot;mean_states.html&quot;, selfcontained = FALSE)
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>Example: End Result</h3>

<pre><code class="r">cat(&#39;&lt;iframe src=&quot;./mean_states.html&quot; width=100%, height=600&gt;&lt;/iframe&gt;&#39;)
</code></pre>

<iframe src="./mean_states.html" width=100%, height=600></iframe>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section>
   <section class='class' data-state=''>
    <h3>rCharts: D3 in R</h3>
    <ul class = "build incremental">
<li>Create and customize interactive visualizations</li>
<li>Gives access to multiple D3 libraries</li>
<li>Easy to make and share</li>
</ul>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>A Lot from a Little</h3>

<pre><code class="r">library(rCharts)
library(knitr)
#read in csv
tobacco &lt;- fread(
  &quot;C:/Users/SBronder/Documents/Projects/prettyGraphs/tobacco.csv&quot;,header=TRUE)
# Source:
# https://research.stlouisfed.org/fred2/series/M0188AUSM149NNBR

# Convert characters to dates in seconds
  tobacco[, dates :=  as.numeric(
  as.POSIXct(tobacco$dates, origin=&quot;1929-06-14&quot;)) * 1000]
</code></pre>

<!---
This actually runs
-->

<pre><code>Error in fread(&quot;C:/Users/SBronder/Documents/Projects/prettyGraphs/tobacco.csv&quot;, : File &#39;C:/Users/SBronder/Documents/Projects/prettyGraphs/tobacco.csv&#39; does not exist. Include one or more spaces to consider the input a system command.
</code></pre>

<pre><code>Error in eval(expr, envir, enclos): object &#39;tobacco&#39; not found
</code></pre>

<pre><code>## Error in loadNamespace(name): there is no package called &#39;stargazer&#39;
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>Making FRED plots</h3>

<pre><code class="r"># use rCharts to access Highcharts d3 library
h1 &lt;- hPlot( 
  Tobacco_Consumption ~ dates,
  data = as.data.frame(tobacco),
  type = &quot;line&quot;,
  title = &quot;Tobacco Consumption, Manufactured Tobacco Supplies for United States&quot;
           )
</code></pre>

<pre><code>## Error in as.data.frame(tobacco): object &#39;tobacco&#39; not found
</code></pre>

<pre><code class="r"># Set type for x/y axis
h1$xAxis(type = &quot;datetime&quot;)
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): object &#39;h1&#39; not found
</code></pre>

<pre><code class="r">h1$yAxis(title = list(text = &quot;Tobacco Consumption in Millions lb.&quot;))
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): object &#39;h1&#39; not found
</code></pre>

<pre><code class="r"># Allow zoom
h1$chart(zoomType = &quot;x&quot;)
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): object &#39;h1&#39; not found
</code></pre>

<pre><code class="r">h1$tooltip(formatter = # Kimm - how to make custom tooltip
              &quot;#! function() { return &#39;Date: &#39;     + 
                              Highcharts.dateFormat(&#39;%b/%e/%Y&#39;,
                                                    new Date(this.x)) +
                              &#39;&lt;br&gt;&#39; +&#39;Consumption: &#39; + this.point.y; } !#&quot;)
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): object &#39;h1&#39; not found
</code></pre>

<p><code>$object</code> comes from the <a href="http://api.highcharts.com/highcharts">highchart&#39;s API</a> </p>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>Making FRED plots</h3>

<pre><code>Error in eval(expr, envir, enclos): object &#39;h1&#39; not found
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>Making Bubble Chart</h3>

<pre><code class="r">a &lt;- hPlot(Pulse ~ Height, data = MASS::survey, type = &quot;bubble&quot;,
           title = &quot;Zoom demo&quot;, subtitle = &quot;bubble chart&quot;,
           size = &quot;Age&quot;, group = &quot;Exer&quot;)

a$chart(zoomType = &quot;xy&quot;)
a$exporting(enabled = T)
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>Making Bubble Chart</h3>

<pre><code>Loading required package: base64enc
</code></pre>

<pre><code>Warning in library(package, lib.loc = lib.loc, character.only = TRUE,
logical.return = TRUE, : there is no package called &#39;base64enc&#39;
</code></pre>

<pre><code>Error: You need to install the base64enc package.
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h2>Example App</h2>

<iframe src="https://johnricco.shinyapps.io/metro_walksheds/" style="border: none; width: 1200px; height: 900px"></iframe>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section>
   <section class='class' data-state=''>
    <h2>Natural Language Processing</h2>
    <pre><code>## Error in library(tm): there is no package called &#39;tm&#39;
</code></pre>

<pre><code>## Error in library(slam): there is no package called &#39;slam&#39;
</code></pre>

<pre><code>## Error in library(wordcloud): there is no package called &#39;wordcloud&#39;
</code></pre>

<pre><code>## Error in library(stm): there is no package called &#39;stm&#39;
</code></pre>

<pre><code>## Error in library(LDAvis): there is no package called &#39;LDAvis&#39;
</code></pre>

<pre><code>## Warning in file(file, &quot;rt&quot;, encoding = fileEncoding): cannot open file &#39;Z:/
## BAGroup/Share/SBronder/prettyGraphs_old/Pens_Tweets_Downtown_Pgh.csv&#39;: No
## such file or directory
</code></pre>

<pre><code>## Error in file(file, &quot;rt&quot;, encoding = fileEncoding): cannot open the connection
</code></pre>

<pre><code>## Error in gsub(&quot;â€&quot;, &quot;&quot;, docsDowntown$text): object &#39;docsDowntown&#39; not found
</code></pre>

<pre><code>## Error in gsub(&quot;â&quot;, &quot;&quot;, docsDowntown$text): object &#39;docsDowntown&#39; not found
</code></pre>

<pre><code>## Error in gsub(&quot;\n&quot;, &quot;&quot;, docsDowntown$text): object &#39;docsDowntown&#39; not found
</code></pre>

<pre><code>## Error in gsub(&quot;-&quot;, &quot; to &quot;, docsDowntown$text): object &#39;docsDowntown&#39; not found
</code></pre>

<pre><code>## Error in gsub(&quot;&amp;gt;&quot;, &quot;&gt;&quot;, docsDowntown$text): object &#39;docsDowntown&#39; not found
</code></pre>

<pre><code>## Error in gsub(&quot;&amp;lt;&quot;, &quot;&lt;&quot;, docsDowntown$text): object &#39;docsDowntown&#39; not found
</code></pre>

<pre><code>## Error in gsub(&quot;\\&quot;, &quot;&quot;, docsDowntown$text, fixed = TRUE): object &#39;docsDowntown&#39; not found
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): could not find function &quot;VCorpus&quot;
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): could not find function &quot;DocumentTermMatrix&quot;
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): object &#39;twt_dtm&#39; not found
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): object &#39;twt_dtm&#39; not found
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): object &#39;twt_dtm&#39; not found
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): object &#39;twt_dtm&#39; not found
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): could not find function &quot;DocumentTermMatrix&quot;
</code></pre>

<pre><code>## Error in tapply(twt_dtm$v/row_sums(twt_dtm)[twt_dtm$i], twt_dtm$j, mean): object &#39;twt_dtm&#39; not found
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): object &#39;twt_dtm&#39; not found
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): object &#39;twt_dtms&#39; not found
</code></pre>

<ul class = "build incremental">
<li>The application of statistical modeling to unstructured text data (Corpora)</li>
<li>Use: Grouping documents, search, inference prediction</li>
</ul>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>NLP: Data Structure</h3>

<ul class = "build incremental">
<li>Corpus - Collection of text with similar attributes</li>
<li>Document Term Matrix: Word counts per document

<ul>
<li>Rows: Documents</li>
<li>Columns: Words</li>
</ul></li>
</ul>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>NLP: Making Corpus</h3>

<pre><code class="r"># Read in csv
docsDowntown &lt;- read.csv(&quot;Z:/BAGroup/Share/SBronder/prettyGraphs_old/Pens_Tweets_Downtown_Pgh.csv&quot;,header=TRUE,sep=&quot;,&quot;,
                         fileEncoding= &quot;native.enc&quot;,stringsAsFactors = FALSE)

# Create corpus
corpus &lt;- VCorpus(VectorSource(docsDowntown$text))

# Create Document Term Matrix + cleaning
twt_dtm &lt;- DocumentTermMatrix(corpus , control = list(stemming = TRUE,
                                                      minWordLength = 1,
                                                      removePunctuation = TRUE))
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>NLP: Cleaning</h3>

<ul class = "build incremental">
<li>Stemming</li>
<li>Bagging</li>
<li>Stop words?
<ul class='incremental'>
<li class='fragment'>Maybe not</li>
<li class='fragment'>He is the king of Spain</li>
<li class='fragment'>He and the king are from Spain</li>
<li class='fragment'> Rm Stops: &quot;he king Spain&quot;</li>
</ul></li>
</ul>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>NLP: TFIDF</h3>

<ul class='incremental'>
  <li class='fragment'>Term Frequency-Inverse Document Frequency</li>
  <li class='fragment'>Most common words across documents</li>
</ul>
  

<pre><code class="r"># Create term frequency-inverse document frequency 
term_tfidf &lt;- tapply(twt_dtm$v/row_sums(twt_dtm)[twt_dtm$i], twt_dtm$j, mean) *
  log2(nDocs(twt_dtm)/col_sums(twt_dtm &gt; 0))
</code></pre>

<pre><code>## Error in loadNamespace(name): there is no package called &#39;stargazer&#39;
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>NLP: TF-IDF Scores</h3>

<pre><code>Error in density(term_tfidf): object &#39;term_tfidf&#39; not found
</code></pre>

<pre><code>Error in data.frame(x = term_density$x, y = term_density$y): object &#39;term_density&#39; not found
</code></pre>

<pre><code>Error in term_density$Var &lt;- &quot;tf-idf&quot;: object &#39;term_density&#39; not found
</code></pre>

<pre><code>Error in getLayer.default(...): object &#39;term_density&#39; not found
</code></pre>

<pre><code>Error in eval(expr, envir, enclos): object &#39;dens&#39; not found
</code></pre>

<pre><code>Error in eval(expr, envir, enclos): object &#39;dens&#39; not found
</code></pre>

<pre><code class="r"># Only take words with a score &gt; 1 and whose rows sum to zero
twt_dtms &lt;- twt_dtm[, term_tfidf &gt;= 1]
twt_dtms &lt;- twt_dtms[row_sums(twt_dtms) &gt; 0,]
summary(col_sums(twt_dtms))
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>NLP: WordClouds</h3>

<pre><code class="r"># Return frequency table for words showing up
freq &lt;- sort(col_sums(twt_dtms, decreasing = F))
</code></pre>

<pre><code>Error in sort(col_sums(twt_dtms, decreasing = F)): could not find function &quot;col_sums&quot;
</code></pre>

<pre><code class="r">wordcloud(names(freq), freq, max.words=100,
          min.freq = 80,colors=brewer.pal(6, &quot;Dark2&quot;))
</code></pre>

<pre><code>Error in eval(expr, envir, enclos): could not find function &quot;wordcloud&quot;
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>NLP: Correlations between words</h3>

<pre><code class="r">plot(twt_dtms,terms=findFreqTerms(twt_dtms, lowfreq=220)[1:20],corThreshold=0.001)
</code></pre>

<pre><code>## Error in plot(twt_dtms, terms = findFreqTerms(twt_dtms, lowfreq = 220)[1:20], : object &#39;twt_dtms&#39; not found
</code></pre>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section>
   <section class='class' data-state=''>
    <h3>NLP: Topic Models</h3>
    <ul class = "build incremental">
<li>NLP model for finding abstract &quot;topics&quot; that occur in a corpus
<ul class='incremental'>
<li class='fragment'>Soft clustering technique</li>
<li class='fragment'>Helps classify unstructured data</li>
<li class='fragment'>Many unanswered questions</li>
</ul></li>
</ul>

    <aside class='notes'>
      
    </aside>
   </section>
   <section class='' data-state=''>
    <h3>NLP: Graph for topic model</h3>

<p><a href="http://bl.ocks.org/Stevo15025/raw/d1f5a9ccbb36784ac9e2/#topic=0&amp;lambda=1&amp;term=now">Link if iframe is broken</a></p>

<iframe src="http://bl.ocks.org/Stevo15025/raw/d1f5a9ccbb36784ac9e2/#topic=0&lambda=1&term=now" style="border: none; width: 1200px; height: 1000px"></iframe>

    <aside class='notes'>
      
    </aside>
   </section>
</section>
<section class='' data-state='' id='slide-12'>
  <h2>Resouces for Learning R</h2>
  <ul class = "build incremental">
<li><a href="http://www.dainf.ct.utfpr.edu.br/%7Ekaestner/Mineracao/RDataMining/Data%20Mining%20with%20R-Kumar.pdf">Data Mining with R</a></li>
<li><a href="http://stackoverflow.com/questions/tagged/r?sort=frequent&amp;pageSize=50">Stackoverflow</a></li>
<li><a href="http://onepager.togaware.com/TextMiningO.pdf">NLP</a></li>
<li><a href="https://www.datacamp.com/courses/free-introduction-to-r">Datacamp</a></li>
<li><a href="http://www.r-bloggers.com/">R-bloggers</a></li>
</ul>

</section>
    </div>
  </div>
</body>
  <script src="libraries/frameworks/revealjs/lib/js/head.min.js"></script>
  <script src="libraries/frameworks/revealjs/js/reveal.min.js"></script>
  <script>
  // Full list of configuration options available here:
  // https://github.com/hakimel/reveal.js#configuration
  Reveal.initialize({
    controls: true,
    progress: true,
    history: true,
    center: true,
    theme: Reveal.getQueryHash().theme || 'Simple', 
    transition: Reveal.getQueryHash().transition || 'default', 
    dependencies: [
    // Cross-browser shim that fully implements classList -
    // https://github.com/eligrey/classList.js/
      { src: 'libraries/frameworks/revealjs/lib/js/classList.js', condition: function() { return !document.body.classList;}},
      // Zoom in and out with Alt+click
      { src: 'libraries/frameworks/revealjs/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
      // Speaker notes
      { src: 'libraries/frameworks/revealjs/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
      // Remote control your reveal.js presentation using a touch device
      //{ src: 'libraries/frameworks/revealjs/plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
      ]
  });
  </script>  <!-- LOAD HIGHLIGHTER JS FILES -->
<script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!-- DONE LOADING HIGHLIGHTER JS FILES -->
 

</html>